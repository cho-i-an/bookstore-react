{"ast":null,"code":"import React,{createContext,useReducer}from\"react\";import{cartReducer}from\"../reducers/CartReducer\";import{jsx as _jsx}from\"react/jsx-runtime\";const initialCartState=[];// const initialCartState:ShoppingCartItem[] =  []\nexport const CartStore=/*#__PURE__*/createContext({cart:initialCartState,dispatch:()=>null});CartStore.displayName='CartContext';function CartContext(_ref){let{children}=_ref;const storageKey='cart';// console.log(\"CartContext is rendered\");\n// @ts-ignore\nconst[cart,dispatch]=useReducer(cartReducer,initialCartState,initialState=>{try{const storedCart=JSON.parse(localStorage.getItem(storageKey)||'[]');return storedCart||initialState;}catch(error){console.log('Error parsing cart',error);return initialState;}});return/*#__PURE__*/_jsx(CartStore.Provider,{value:{cart,dispatch},children:children});}export default CartContext;","map":{"version":3,"names":["React","createContext","useReducer","cartReducer","jsx","_jsx","initialCartState","CartStore","cart","dispatch","displayName","CartContext","_ref","children","storageKey","initialState","storedCart","JSON","parse","localStorage","getItem","error","console","log","Provider","value"],"sources":["/Users/ann/Desktop/CS5244/IAnBookstoreReactSession/client/src/contexts/CartContext.tsx"],"sourcesContent":["import React, {createContext, Dispatch, ReactNode, Reducer, useEffect, useReducer, useState} from \"react\";\nimport {cartReducer} from \"../reducers/CartReducer\";\nimport { ShoppingCartItem} from \"../types\";\n\n\nconst initialCartState:ShoppingCartItem[] =  []\n// const initialCartState:ShoppingCartItem[] =  []\nexport const CartStore = createContext<{\n    cart: ShoppingCartItem[];\n    dispatch: Dispatch<any>;\n}>({\n    cart: initialCartState,\n    dispatch: () => null\n});\n\nCartStore.displayName = 'CartContext';\ninterface CartContextProps {\n    children: ReactNode;\n}\n\nfunction CartContext ({ children }:CartContextProps)  {\n    const storageKey = 'cart'\n    // console.log(\"CartContext is rendered\");\n    // @ts-ignore\n    const [cart, dispatch] =useReducer(cartReducer, initialCartState,\n        (initialState) => {\n            try {\n                const storedCart = JSON.parse(localStorage.getItem(storageKey) || '[]');\n                return storedCart as ShoppingCartItem[] || initialState;\n            } catch (error) {\n                console.log('Error parsing cart', error);\n                return initialState;\n            }\n        },\n\n\n    );\n\n    return (\n        <CartStore.Provider value={{ cart, dispatch }}>\n            {children}\n        </CartStore.Provider>\n    );\n}\nexport default CartContext;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAGC,aAAa,CAA2CC,UAAU,KAAiB,OAAO,CACzG,OAAQC,WAAW,KAAO,yBAAyB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAIpD,KAAM,CAAAC,gBAAmC,CAAI,EAAE,CAC/C;AACA,MAAO,MAAM,CAAAC,SAAS,cAAGN,aAAa,CAGnC,CACCO,IAAI,CAAEF,gBAAgB,CACtBG,QAAQ,CAAEA,CAAA,GAAM,IACpB,CAAC,CAAC,CAEFF,SAAS,CAACG,WAAW,CAAG,aAAa,CAKrC,QAAS,CAAAC,WAAWA,CAAAC,IAAA,CAAkC,IAAhC,CAAEC,QAA0B,CAAC,CAAAD,IAAA,CAC/C,KAAM,CAAAE,UAAU,CAAG,MAAM,CACzB;AACA;AACA,KAAM,CAACN,IAAI,CAAEC,QAAQ,CAAC,CAAEP,UAAU,CAACC,WAAW,CAAEG,gBAAgB,CAC3DS,YAAY,EAAK,CACd,GAAI,CACA,KAAM,CAAAC,UAAU,CAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAACN,UAAU,CAAC,EAAI,IAAI,CAAC,CACvE,MAAO,CAAAE,UAAU,EAA0BD,YAAY,CAC3D,CAAE,MAAOM,KAAK,CAAE,CACZC,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAEF,KAAK,CAAC,CACxC,MAAO,CAAAN,YAAY,CACvB,CACJ,CAGJ,CAAC,CAED,mBACIV,IAAA,CAACE,SAAS,CAACiB,QAAQ,EAACC,KAAK,CAAE,CAAEjB,IAAI,CAAEC,QAAS,CAAE,CAAAI,QAAA,CACzCA,QAAQ,CACO,CAAC,CAE7B,CACA,cAAe,CAAAF,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}